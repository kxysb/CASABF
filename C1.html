<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casablanca Secret Santa</title>
    <style>
        body {
            font-family: tahoma, sans-serif;
            background-color: #ab0303;
            margin: 0;
            padding: 20px;
            overflow: hidden;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #296331;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 7px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            width: 100%;
            margin-top: 20px;
        }
        button:hover {
            background-color: #e08712;
        }
        .result {
            margin-top: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .snowflake {
            position: absolute;
            top: -10px;
            color: #fff;
            font-size: 24px;
            pointer-events: none;
            z-index: 9999;
            user-select: none;
            animation: snow 10s linear infinite;
        }

        @keyframes snow {
            0% { transform: translateY(-10px); }
            100% { transform: translateY(100vh); }
        }
    </style>
</head>
<body>

<div class="container">
    <p style="font-family:Futura;"><center>
        <img src="https://cdn.shopify.com/s/files/1/0076/1341/5506/files/Stacked_Logo_-_Square-3.png" width="200"><br>
        <font color="#a81d1d" size="+2">CASABLANCA SECRET SANTA</font>
    </center></p>
    <p><center>Enter your name below to reveal your Secret Santa. Don't share it with anybody and there's no pre-set budget. It's the thought that counts! :)</center></p>

    <input type="text" id="userName" placeholder="Enter your name here">
    <button onclick="checkParticipant()">Choose your Secret Santa!</button>

    <div id="result" class="result" style="display:none;">
        <p><font color="#e06900">Your Secret Santa is: </font><span id="secretSantaName"></span></p>
    </div>
</div>

<script>
    // Snow Effect
    document.addEventListener("DOMContentLoaded", function() {
        const numberOfSnowflakes = 50;
        for (let i = 0; i < numberOfSnowflakes; i++) {
            let snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.innerHTML = 'â„';
            snowflake.style.left = `${Math.random() * 100}vw`;
            snowflake.style.animationDuration = `${Math.random() * 5 + 5}s`;
            snowflake.style.animationDelay = `${Math.random() * 10}s`;
            snowflake.style.fontSize = `${Math.random() * 10 + 10}px`;
            document.body.appendChild(snowflake);
        }
    });

    const participants = [
        "Kevin","Elliott","Raphael","Hicham","Maxime","Helen",
        "Hasael","Yassmine","Hamza","Oriane","Amadou","Lucrezia","Lina"
    ];

    let secretSantaAssignments = {};

    function checkParticipant() {
        const userName = document.getElementById('userName').value.trim();
        if (!participants.includes(userName)) {
            alert("Sorry, you're not part of the Secret Santa group :(");
            return;
        }

        if (!Object.keys(secretSantaAssignments).length) {
            assignAllSecretSantas();
        }

        document.getElementById('secretSantaName').textContent = secretSantaAssignments[userName];
        document.getElementById('result').style.display = "block";
    }

    function assignAllSecretSantas() {
        let shuffled;
        let valid = false;

        while (!valid) {
            shuffled = [...participants];
            // Shuffle using Fisher-Yates
            for (let i = shuffled.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }

            // Check that no one is assigned themselves
            valid = true;
            for (let i = 0; i < participants.length; i++) {
                if (participants[i] === shuffled[i]) {
                    valid = false;
                    break;
                }
            }
        }

        // Assign each participant
        for (let i = 0; i < participants.length; i++) {
            secretSantaAssignments[participants[i]] = shuffled[i];
        }
    }
</script>

</body>
</html>
